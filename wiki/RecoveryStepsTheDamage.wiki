#summary Recovery steps: sample damage

=== Doing some damage ===

To give a damage example, we'll use the sakila database. We will `TRUNCATE` the customer table, and try to recover.
The example uses `innodb_file_per_table=0`.

{{{
mysql> SELECT COUNT(*) FROM customer;
+----------+
| COUNT(*) |
+----------+
|      599 | 
+----------+
1 row in set (0.00 sec)

mysql> SELECT * FROM customer LIMIT 6;
+-------------+----------+------------+-----------+-------------------------------------+------------+--------+---------------------+---------------------+
| customer_id | store_id | first_name | last_name | email                               | address_id | active | create_date         | last_update         |
+-------------+----------+------------+-----------+-------------------------------------+------------+--------+---------------------+---------------------+
|           1 |        1 | MARY       | SMITH     | MARY.SMITH@sakilacustomer.org       |          5 |      1 | 2006-02-14 22:04:36 | 2006-02-15 04:57:20 | 
|           2 |        1 | PATRICIA   | JOHNSON   | PATRICIA.JOHNSON@sakilacustomer.org |          6 |      1 | 2006-02-14 22:04:36 | 2006-02-15 04:57:20 | 
|           3 |        1 | LINDA      | WILLIAMS  | LINDA.WILLIAMS@sakilacustomer.org   |          7 |      1 | 2006-02-14 22:04:36 | 2006-02-15 04:57:20 | 
|           4 |        2 | BARBARA    | JONES     | BARBARA.JONES@sakilacustomer.org    |          8 |      1 | 2006-02-14 22:04:36 | 2006-02-15 04:57:20 | 
|           5 |        1 | ELIZABETH  | BROWN     | ELIZABETH.BROWN@sakilacustomer.org  |          9 |      1 | 2006-02-14 22:04:36 | 2006-02-15 04:57:20 | 
|           6 |        2 | JENNIFER   | DAVIS     | JENNIFER.DAVIS@sakilacustomer.org   |         10 |      1 | 2006-02-14 22:04:36 | 2006-02-15 04:57:20 | 
+-------------+----------+------------+-----------+-------------------------------------+------------+--------+---------------------+---------------------+
6 rows in set (0.00 sec)
}}}

And...

{{{
mysql> SET foreign_key_checks=0;
Query OK, 0 rows affected (0.00 sec)

mysql> TRUNCATE TABLE customer;
Query OK, 541 rows affected (0.00 sec)
}}}

Damage done.


Next: [http://code.google.com/p/innodb-tools/wiki/InnodbToolsSetup InnoDB tools setup]