#summary Splitting shared tablespace file

= Splitting the shared tablespace =

If you're using `innodbfile_per_table`, you can skip this step. Your data resides within the `.ibd` file. It is a tablespace of its own. There is no need to split it.

When using a shared tablespace, we wish to split it in order to be able to relate only to pages containing our table's data.

In our example, I've used `mylvmbackup` to take snapshot of the shared tablespace `ibdata1` file.
`page_parser` will split this file:
{{{
[root@test innodb-recovery-0.3]# ./page_parser -5 -f /tmp/ibdata1 

...
Read page #1465.. saving it to pages-1246354779/202976-2147483648/1465-00001465.page
Read page #1466.. saving it to pages-1246354779/202976-2147483648/1466-00001466.page
Read page #1467.. saving it to pages-1246354779/202976-2147483648/1467-00001467.page
Read page #1468.. saving it to pages-1246354779/202976-2147483648/1468-00001468.page
Read page #1469.. saving it to pages-1246354779/202976-2147483648/1469-00001469.page
Read page #1470.. saving it to pages-1246354779/202976-2147483648/1470-00001470.page
Read page #1471.. saving it to pages-1246354779/202976-2147483648/1471-00001471.page
Read page #1472.. saving it to pages-1246354779/202976-2147483648/1472-00001472.page
Read page #1473.. saving it to pages-1246354779/202976-2147483648/1473-00001473.page
Read page #1474.. saving it to pages-1246354779/202976-2147483648/1474-00001474.page
...
Read page #0.. saving it to pages-1246354779/0-0/1630-00000000.page
Read page #0.. saving it to pages-1246354779/0-0/1631-00000000.page
Read page #0.. saving it to pages-1246354779/0-0/1632-00000000.page
Read page #0.. saving it to pages-1246354779/0-0/1633-00000000.page
Read page #0.. saving it to pages-1246354779/0-0/1634-00000000.page
Read page #0.. saving it to pages-1246354779/0-0/1635-00000000.page
Read page #0.. saving it to pages-1246354779/0-0/1636-00000000.page
Read page #0.. saving it to pages-1246354779/0-0/1637-00000000.page
Read page #0.. saving it to pages-1246354779/0-0/1638-00000000.page
Read page #0.. saving it to pages-1246354779/0-0/1639-00000000.page
Read page #0.. saving it to pages-1246354779/0-0/1640-00000000.page
...
}}}

The *-5* option stands for MySQL 5 (with COMPACT format). For MySQL < 5, use *-4*.
The result of this utility is the pages split from the shared tablespace file. Some of these pages contain our data. Others are irrelevant for our purposes.