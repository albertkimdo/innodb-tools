#summary Recovery steps: Splitting shared tablespace file

= Splitting the shared tablespace =

If you're using `innodbfile_per_table`, you can skip this step. Your data resides within the `.ibd` file. It is a tablespace of its own. There is no need to split it.

When using a shared tablespace, we wish to split it in order to be able to relate only to pages containing our table's data.

In our example, I've used `mylvmbackup` to take snapshot of the shared tablespace `ibdata1` file.
`page_parser` will split this file:
{{{
[root@test innodb-recovery-0.3]# ./page_parser -5 -f /tmp/ibdata1 

...
ead page #486.. saving it to pages-1246363747/0-95/486-00000486.page
Read page #487.. saving it to pages-1246363747/0-99/487-00000487.page
Read page #488.. saving it to pages-1246363747/0-99/488-00000488.page
Read page #489.. saving it to pages-1246363747/0-95/489-00000489.page
Read page #490.. saving it to pages-1246363747/0-97/490-00000490.page
Read page #491.. saving it to pages-1246363747/0-96/491-00000491.page
Read page #492.. saving it to pages-1246363747/637548544-1376495394/492-00000492.page
Read page #493.. saving it to pages-1246363747/0-97/493-00000493.page
Read page #494.. saving it to pages-1246363747/0-97/494-00000494.page
Read page #495.. saving it to pages-1246363747/0-97/495-00000495.page
Read page #496.. saving it to pages-1246363747/0-97/496-00000496.page
Read page #497.. saving it to pages-1246363747/0-97/497-00000497.page
Read page #498.. saving it to pages-1246363747/0-97/498-00000498.page
Read page #499.. saving it to pages-1246363747/0-96/499-00000499.page
Read page #500.. saving it to pages-1246363747/0-98/500-00000500.page
Read page #501.. saving it to pages-1246363747/0-97/501-00000501.page
Read page #502.. saving it to pages-1246363747/0-98/502-00000502.page
Read page #503.. saving it to pages-1246363747/0-98/503-00000503.page
Read page #504.. saving it to pages-1246363747/0-98/504-00000504.page
Read page #505.. saving it to pages-1246363747/0-98/505-00000505.page
Read page #506.. saving it to pages-1246363747/0-96/506-00000506.page
Read page #507.. saving it to pages-1246363747/184563712-1376496647/507-00000507.page
Read page #508.. saving it to pages-1246363747/0-98/508-00000508.page
Read page #509.. saving it to pages-1246363747/0-98/509-00000509.page
Read page #510.. saving it to pages-1246363747/0-96/510-00000510.page
...
Read page #0.. saving it to pages-1246363747/0-0/1654-00000000.page
Read page #0.. saving it to pages-1246363747/0-0/1655-00000000.page
Read page #0.. saving it to pages-1246363747/0-0/1656-00000000.page
Read page #0.. saving it to pages-1246363747/0-0/1657-00000000.page
Read page #0.. saving it to pages-1246363747/0-0/1658-00000000.page
Read page #0.. saving it to pages-1246363747/0-0/1659-00000000.page
Read page #0.. saving it to pages-1246363747/0-0/1660-00000000.page
Read page #0.. saving it to pages-1246363747/0-0/1661-00000000.page
Read page #0.. saving it to pages-1246363747/0-0/1662-00000000.page
Read page #0.. saving it to pages-1246363747/0-0/1663-00000000.page
...
}}}

The *-5* option stands for MySQL 5 (with COMPACT format). For MySQL < 5, use *-4*.
The result of this utility is the pages split from the shared tablespace file. Some of these pages contain our data. Others are irrelevant for our purposes.

Next: [http://code.google.com/p/innodb-tools/wiki/RecoveryStepsKnowingWhereYourDataIsWithinTablespace Knowing where your data resides withing the tablespace]